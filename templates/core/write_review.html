{% extends 'base.html' %}

{% block title %}Write a Review - Purbanchal Roadways{% endblock %}

{% block content %}
<!-- Write Review Hero Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="mb-4 fw-bold text-primary">Write a Review</h1>
                <p class="lead">Share your experience with Purbanchal Roadways</p>
            </div>
        </div>
    </div>
</section>

<!-- Review Form Section -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-5">
                        <h2 class="text-center mb-4">Your Feedback Matters</h2>
                        <p class="text-center mb-5">Thank you for choosing Purbanchal Roadways. We value your feedback as it helps us improve our services. Please take a moment to share your experience with us.</p>

                        <form id="reviewForm" action="#" method="post">
                            {% csrf_token %}
                            <input type="hidden" name="category" id="categoryInput" value="{{ category }}">

                            <div class="mb-4">
                                <label for="name" class="form-label">Your Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="name" name="name" required>
                            </div>

                            <div class="mb-4">
                                <label for="email" class="form-label">e-mail Address <span class="text-danger">*</span></label>
                                <input type="email" class="form-control" id="email" name="email" required>
                                <div class="form-text">Your e-mail will not be published. It's only for verification purposes.</div>
                            </div>

                            <div class="mb-4">
                                <label class="form-label">Service Category <span class="text-danger">*</span></label>
                                <div class="d-flex flex-wrap">
                                    <div class="form-check me-4 mb-2">
                                        <input class="form-check-input" type="radio" name="service_category" id="domestic" value="Domestic Moving" {% if category == 'domestic' %}checked{% endif %} required>
                                        <label class="form-check-label" for="domestic">Domestic Moving</label>
                                    </div>
                                    <div class="form-check me-4 mb-2">
                                        <input class="form-check-input" type="radio" name="service_category" id="vehicle" value="Vehicle Transport" {% if category == 'vehicle' %}checked{% endif %} required>
                                        <label class="form-check-label" for="vehicle">Vehicle Transport</label>
                                    </div>
                                    <div class="form-check me-4 mb-2">
                                        <input class="form-check-input" type="radio" name="service_category" id="warehouse" value="Warehouse" {% if category == 'warehouse' %}checked{% endif %} required>
                                        <label class="form-check-label" for="warehouse">Warehouse</label>
                                    </div>
                                    <div class="form-check me-4 mb-2">
                                        <input class="form-check-input" type="radio" name="service_category" id="storage" value="Home Storage" {% if category == 'storage' %}checked{% endif %} required>
                                        <label class="form-check-label" for="storage">Home Storage</label>
                                    </div>
                                    <div class="form-check me-4 mb-2">
                                        <input class="form-check-input" type="radio" name="service_category" id="office" value="Office Shifting" {% if category == 'office' %}checked{% endif %} required>
                                        <label class="form-check-label" for="office">Office Shifting</label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="radio" name="service_category" id="international" value="International Moving" {% if category == 'international' %}checked{% endif %} required>
                                        <label class="form-check-label" for="international">International Moving</label>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-4">
                                <label class="form-label">Rating <span class="text-danger">*</span></label>
                                <div class="rating-stars mb-2">
                                    <div class="d-flex">
                                        <div class="star-rating">
                                            <input type="radio" id="star5" name="rating" value="5" required><label for="star5"></label>
                                            <input type="radio" id="star4" name="rating" value="4"><label for="star4"></label>
                                            <input type="radio" id="star3" name="rating" value="3"><label for="star3"></label>
                                            <input type="radio" id="star2" name="rating" value="2"><label for="star2"></label>
                                            <input type="radio" id="star1" name="rating" value="1"><label for="star1"></label>
                                        </div>
                                        <div class="ms-3 rating-text">Select your rating</div>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-4">
                                <label for="review_title" class="form-label">Review Title <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="review_title" name="review_title" placeholder="Summarize your experience" required>
                            </div>

                            <div class="mb-4">
                                <label for="review_text" class="form-label">Your Review <span class="text-danger">*</span></label>
                                <textarea class="form-control" id="review_text" name="review_text" rows="5" placeholder="Share the details of your experience with our service" required></textarea>
                            </div>

                            <div class="mb-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="terms" name="terms" required>
                                    <label class="form-check-label" for="terms">
                                        I agree to the <a href="{% url 'terms_of_service' %}" target="_blank">Terms of Service</a> and <a href="{% url 'privacy_policy' %}" target="_blank">Privacy Policy</a>
                                    </label>
                                </div>
                            </div>

                            <div class="text-center">
                                <button type="submit" class="btn btn-primary btn-lg px-5">Submit Review</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials Preview -->
<section class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-5">What Our Customers Say</h2>

        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card h-100 review-card">
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-3">
                            <div class="review-avatar me-3">
                                <i class="fas fa-user-circle fa-3x text-secondary"></i>
                            </div>
                            <div>
                                <h5 class="mb-0">Rajesh Kumar</h5>
                                <div class="text-warning">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <small class="text-muted">Domestic Moving</small>
                            </div>
                        </div>
                        <p class="card-text">Excellent service! The team was professional and handled all my belongings with care. The move from Dibrugarh to Guwahati was smooth and hassle-free.</p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card h-100 review-card">
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-3">
                            <div class="review-avatar me-3">
                                <i class="fas fa-user-circle fa-3x text-secondary"></i>
                            </div>
                            <div>
                                <h5 class="mb-0">Priya Sharma</h5>
                                <div class="text-warning">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                </div>
                                <small class="text-muted">Vehicle Transport</small>
                            </div>
                        </div>
                        <p class="card-text">I was worried about transporting my car from Assam to Delhi, but Purbanchal Roadways made it so easy. The car arrived in perfect condition and right on schedule.</p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card h-100 review-card">
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-3">
                            <div class="review-avatar me-3">
                                <i class="fas fa-user-circle fa-3x text-secondary"></i>
                            </div>
                            <div>
                                <h5 class="mb-0">Amit Patel</h5>
                                <div class="text-warning">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <small class="text-muted">Office Shifting</small>
                            </div>
                        </div>
                        <p class="card-text">Our office relocation was handled with utmost professionalism. The team was efficient, careful with our equipment, and completed the move ahead of schedule.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center mt-4">
            <a href="{% url 'about' %}#reviewTabs" class="btn btn-outline-primary">View All Reviews</a>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
    .star-rating {
        display: inline-flex;
        flex-direction: row-reverse;
        font-size: 0;
    }

    .star-rating input {
        display: none;
    }

    .star-rating label {
        cursor: pointer;
        width: 30px;
        height: 30px;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3e%3cpath d='M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z' fill='%23e5e5e5'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: center;
        background-size: 24px;
    }

    .star-rating label:hover,
    .star-rating label:hover ~ label,
    .star-rating input:checked ~ label {
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3e%3cpath d='M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z' fill='%23ffc107'/%3e%3c/svg%3e");
    }

    .rating-text {
        font-size: 1rem;
        color: #6c757d;
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Update rating text when stars are clicked
        const ratingInputs = document.querySelectorAll('.star-rating input');
        const ratingText = document.querySelector('.rating-text');

        ratingInputs.forEach(input => {
            input.addEventListener('change', function() {
                const value = this.value;
                let text = '';

                switch(value) {
                    case '1':
                        text = 'Poor';
                        break;
                    case '2':
                        text = 'Fair';
                        break;
                    case '3':
                        text = 'Good';
                        break;
                    case '4':
                        text = 'Very Good';
                        break;
                    case '5':
                        text = 'Excellent';
                        break;
                }

                ratingText.textContent = text;
            });
        });
    });
</script>
{% endblock %}
